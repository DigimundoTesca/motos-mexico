{% extends "base.html" %}

{% block content %}
<div class="container">
  <form id="new-order-form" class="form" action="" method="post">
    <h1 class="text-uppercase text-center">Orden de Ingreso</h1>

    {% csrf_token %}

    <fieldset class="form-group">
      <legend>Exterior</legend>
      <div class="row form-options">
        <div id="opt-1" class="col">
          <div class="radio-group" hidden>
            <input id="radio1" type="radio" name="radio1" value="yes" checked>
            <input id="radio2" type="radio" name="radio1" value="no">
            <input id="radio3" type="radio" name="radio1" value="cd">
          </div>
          <button type="button" type="button" class="btn btn-outline-secondary btn-option btn-block">
            Indicadores del tablero
          </button>
        </div>

        <div id="opt-2" class="col">
          <div class="radio-group" hidden>
            <input id="radio4" type="radio" name="radio2" value="yes" checked>
            <input id="radio5" type="radio" name="radio2" value="no">
            <input id="radio6" type="radio" name="radio2" value="cd">
          </div>
          <button type="button" class="btn btn-outline-secondary btn-option btn-block">
            Testigo de FI
          </button>
        </div>

        <div id="opt-3" class="col">
          <div class="radio-group" hidden>
            <input id="radio7" type="radio" name="radio3" value="yes" checked>
            <input id="radio8" type="radio" name="radio3" value="no">
            <input id="radio9" type="radio" name="radio3" value="cd">
          </div>
          <button type="button" class="btn btn-outline-secondary btn-option btn-block">
            Kilometraje
          </button>
        </div>

        <div id="opt-4" class="col">
          <div class="radio-group" hidden>
            <input id="radio10" type="radio" name="radio4" value="yes" checked>
            <input id="radio11" type="radio" name="radio4" value="no">
            <input id="radio12" type="radio" name="radio4" value="cd">
          </div>
          <button type="button" class="btn btn-outline-secondary btn-option btn-block">
            Indicadores de Gasolina
          </button>
        </div>

        <div id="opt-5" class="col">
          <div class="radio-group" hidden>
            <input id="radio13" type="radio" name="radio5" value="yes" checked>
            <input id="radio14" type="radio" name="radio5" value="no">
            <input id="radio15" type="radio" name="radio5" value="cd">
          </div>
          <button type="button" class="btn btn-outline-secondary btn-option btn-block">
            Mando de direccionales
          </button>
        </div>
      </div>
      <div class="row fieldset-btns">
        <input type="button" name="next" class="btn btn-primary next action-button" value="Siguiente">
      </div>
    </fieldset>

    <fieldset class="form-group">
      <legend>Lateral Izquierdo</legend>
      <div class="row form-options">
        <div id="opt-6" class="col">
          <div class="radio-group" hidden>
            <input id="radio1" type="radio" name="radio6" value="yes" checked>
            <input id="radio2" type="radio" name="radio6" value="no">
            <input id="radio3" type="radio" name="radio6" value="cd">
          </div>
          <button type="button" type="button" class="btn btn-outline-secondary btn-option btn-block">
            Direccional
          </button>
        </div>

        <div id="opt-7" class="col">
          <div class="radio-group" hidden>
            <input id="radio4" type="radio" name="radio7" value="yes" checked>
            <input id="radio5" type="radio" name="radio7" value="no">
            <input id="radio6" type="radio" name="radio7" value="cd">
          </div>
          <button type="button" class="btn btn-outline-secondary btn-option btn-block">
            Espejo
          </button>
        </div>

        <div id="opt-8" class="col">
          <div class="radio-group" hidden>
            <input id="radio7" type="radio" name="radio8" value="yes" checked>
            <input id="radio8" type="radio" name="radio8" value="no">
            <input id="radio9" type="radio" name="radio8" value="cd">
          </div>
          <button type="button" class="btn btn-outline-secondary btn-option btn-block">
            Tapa lateral superior
          </button>
        </div>

        <div id="opt-9" class="col">
          <div class="radio-group" hidden>
            <input id="radio10" type="radio" name="radio9" value="yes" checked>
            <input id="radio11" type="radio" name="radio9" value="no">
            <input id="radio12" type="radio" name="radio9" value="cd">
          </div>
          <button type="button" class="btn btn-outline-secondary btn-option btn-block">
            Tapa lateral inferior (lower)
          </button>
        </div>

        <div id="opt-10" class="col">
          <div class="radio-group" hidden>
            <input id="radio13" type="radio" name="radio10" value="yes" checked>
            <input id="radio14" type="radio" name="radio10" value="no">
            <input id="radio15" type="radio" name="radio10" value="cd">
          </div>
          <button type="button" class="btn btn-outline-secondary btn-option btn-block">
            Tapa de estator
          </button>
        </div>
      </div>
      <div class="row fieldset-btns">
        <input type="button" name="previous" class="btn btn-primary previous action-button" value="Anterior">
        <input type="button" name="next" class="btn btn-primary next action-button" value="Siguiente">
      </div>
    </fieldset>

    <fieldset class="form-group">
      <legend>Lateral Derecho</legend>
      <div class="row form-options">
        <div id="opt-6" class="col">
          <div class="radio-group" hidden>
            <input id="radio1" type="radio" name="radio11" value="yes" checked>
            <input id="radio2" type="radio" name="radio11" value="no">
            <input id="radio3" type="radio" name="radio11" value="cd">
          </div>
          <button type="button" type="button" class="btn btn-outline-secondary btn-option btn-block">
            Direccional
          </button>
        </div>

        <div id="opt-7" class="col">
          <div class="radio-group" hidden>
            <input id="radio4" type="radio" name="radio12" value="yes" checked>
            <input id="radio5" type="radio" name="radio12" value="no">
            <input id="radio6" type="radio" name="radio12" value="cd">
          </div>
          <button type="button" class="btn btn-outline-secondary btn-option btn-block">
            Espejo
          </button>
        </div>

        <div id="opt-8" class="col">
          <div class="radio-group" hidden>
            <input id="radio7" type="radio" name="radio13" value="yes" checked>
            <input id="radio8" type="radio" name="radio13" value="no">
            <input id="radio9" type="radio" name="radio13" value="cd">
          </div>
          <button type="button" class="btn btn-outline-secondary btn-option btn-block">
            Tapa lateral superior
          </button>
        </div>

        <div id="opt-9" class="col">
          <div class="radio-group" hidden>
            <input id="radio10" type="radio" name="radio14" value="yes" checked>
            <input id="radio11" type="radio" name="radio14" value="no">
            <input id="radio12" type="radio" name="radio14" value="cd">
          </div>
          <button type="button" class="btn btn-outline-secondary btn-option btn-block">
            Tapa lateral inferior (lower)
          </button>
        </div>

        <div id="opt-10" class="col">
          <div class="radio-group" hidden>
            <input id="radio13" type="radio" name="radio15" value="yes" checked>
            <input id="radio14" type="radio" name="radio15" value="no">
            <input id="radio15" type="radio" name="radio15" value="cd">
          </div>
          <button type="button" class="btn btn-outline-secondary btn-option btn-block">
            Tapa de estator
          </button>
        </div>
      </div>
      <div class="row fieldset-btns">
        <input type="button" name="previous" class="btn btn-primary previous action-button" value="Anterior">
        <input type="submit" name="submit" class="btn btn-success" value="Enviar">
      </div>
    </fieldset>
    <!-- progreso -->
    <ul id="progreso">
      <li class="active">
        <span>Exterior</span>
      </li>
      <li>
        <span>Lateral izquierdo</span>
      </li>
      <li>
        <span>Lateral derecho</span>
      </li>
    </ul>
  </form>
  {# <span class="text-muted">#}
  {# Formulario de ejemplo 1#}
  {# </span>#}
</div>
{% endblock %}

{% block scripts %}
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-easing/1.4.1/jquery.easing.min.js" integrity="sha256-H3cjtrm/ztDeuhCN9I4yh4iN2Ybx/y1RM7rMmAesA0k=" crossorigin="anonymous"></script>
<script type="text/javascript">
$(document).ready(function() {
  $('.btn-option').click(function(event) {
    let option = $(this).siblings('.radio-group').find('input[type=radio]:checked').val();
    if ( option === 'yes' ) {
      $(this).siblings('.radio-group').find('input[type=radio]:checked').attr('checked',false);
      $(this).siblings('.radio-group').find('input:radio[value=no]').attr('checked', 'checked');
      $(this).removeClass('btn-outline-secondary');
      $(this).addClass('btn-outline-primary');
    } else if ( option === 'no' ) {
      $(this).siblings('.radio-group').find('input[type=radio]:checked').attr('checked',false);
      $(this).siblings('.radio-group').find('input:radio[value=cd]').attr('checked', 'checked');
      $(this).removeClass('btn-outline-primary');
      $(this).addClass('btn-outline-success');
    } else {
      $(this).siblings('.radio-group').find('input[type=radio]:checked').attr('checked',false);
      $(this).siblings('.radio-group').find('input:radio[value=yes]').attr('checked', 'checked');
      $(this).removeClass('btn-outline-success');
      $(this).addClass('btn-outline-secondary');
    }
  });
  var current_fs, next_fs, previous_fs; //fieldsets

  $(".next").click(function(){
    current_fs = $(this).parents('fieldset');
    next_fs = $(this).parents('fieldset').next();
    //activar el siguiente paso en progreso usando el índice de next_fs
    $("#progreso li").eq($("fieldset").index(next_fs)).addClass("active");

    //mostrar el siguiente fieldset
    next_fs.show();
    //ocultar el fieldset actual con estilo
    current_fs.animate({opacity: 0}, {
      step: function(now, mx) {
        //como la opacidad de current_fs está reducida a 0 - almacenado en "now"
        //1. escala current_fs hasta 80%
        scale = 1 - (1 - now) * 0.2;
        //2. traer next_fs desde la derecha (50%)
        left = (now * 50)+"%";
        //3. aumentar la opacidad de next_fs a 1 a medida que avanza
        opacity = 1 - now;
        current_fs.css({'transform': 'scale('+scale+')'});
        next_fs.css({'left': left, 'opacity': opacity});
      },
      duration: 800,
      complete: function(){
        current_fs.hide();
      },
      //Esto viene del plugin easing
      easing: 'easeInOutBack'
    });

  });


  $(".previous").click(function(){
    current_fs = $(this).parents('fieldset');
    previous_fs = $(this).parents('fieldset').prev();

    //des-activar paso actual en progreso
    $("#progreso li").eq($("fieldset").index(current_fs)).removeClass("active");

    // mostrar el fieldset anterior
    previous_fs.show();
    //ocultar el fieldset actual con estilo
    current_fs.animate({opacity: 0}, {
      step: function(now, mx) {
        //as the opacity of current_fs reduces to 0 - stored in "now"
        //1. escalar previous_fs de 80% a 100%
        scale = 0.8 + (1 - now) * 0.2;
        //2. take current_fs to the right(50%) - from 0%
        left = ((1-now) * 50)+"%";
        //3. increase opacity of previous_fs to 1 as it moves in
        opacity = 1 - now;
        current_fs.css({'left': left});
        previous_fs.css({'transform': 'scale('+scale+')', 'opacity': opacity});
      },
      duration: 800,
      complete: function(){
        current_fs.hide();
      },
      //Esto viene del plugin easing
      easing: 'easeInOutBack',
    });
  });

});

</script>
{% endblock %}
